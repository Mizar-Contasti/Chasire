---
sidebar_position: 4
---

# Built-in Functions

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

Chasire has many useful Functions that can help us handle Dialogflow's Request in our backend and provide a good response.

## Requests

These Functions help us to handle Intents, Tags and Events

- A big difference between Dialogflow ES/CX is the way they trigger actions, in ES we use Intents, in CX we use Intents, Tags and Events.
- Keep in mind that we have a different way of building this functionality (take time to understand the tutorials regarding triggering from user to bot).

### intent

<Tabs>
<TabItem value="php" label="PHP">

- Receives the name of the intent and returns true or false, is used in IF statements to do an specific behavior for an intent in our code

```php
if(intent('intentName')){
    //Do some code
}
```

</TabItem>
</Tabs>

### tag

<Tabs>
<TabItem value="php" label="PHP">

- Receives the name of the tag and returns true or false, is used in IF statements to do an specific behavior for an tag in our code

```php
if(tag('tagName')){
    //Do some code
}
```

</TabItem>
</Tabs>

### event

<Tabs>
<TabItem value="php" label="PHP">

- Receives the name of the event and returns true or false, is used in IF statements to do an specific behavior for an event in our code

```php
if(event('eventName')){
    //Do some code
}
```

</TabItem>
</Tabs>

## Parameters

These functions are used to handle Parameters

### getSessionParameter

> - Returns the value of the specific parameter living in the current session.

<Tabs>
<TabItem value="php" label="PHP">

```php
$parameterValue = getSessionParameter()['parameterName'];
```

</TabItem>
</Tabs>

### updateSessionParameters

> - Provides a Way to update Session Parameters from the code.
> - This function loads a new session, that we have to pass as an argument into templates or prompt functions.

<Tabs>
<TabItem value="php" label="PHP">

```php
$parameters = [
    'parameterName1' => 'parameterValue1',
    'parameterName2' => [
      'parameterName3' => 'parameterValue3',
      ],
];

$session = updateSessionParameters($parameters);
```

</TabItem>
</Tabs>

## Triggers

These functions help us to Trigger Text messages that can help to troubleshoot or to provide a better experience to the user.

### triggerError

> - Displays an Error, works for all the integrations.
> - Receives as Array, type of request, value of request, the message of the error to trigger and the Parameters functionality.
> - Parameters are optional, if you dont want to use then just pass session as false otherwise check the parameters documentation.;

<Tabs>
<TabItem value="php" label="PHP">

```php
$session = false; || $session = getSessionParameter($parameters);
$request_type = "intent || tag || event";
$request_value = "requestValue";
$errorMessage = "Error Message";

triggerError($session,$request_type,$request_value,$errorMessage);
```

</TabItem>
</Tabs>

### triggerPrompt

> - Displays a Prompt, works for all the integrations.
> - Its used in Addition with SlotFilling ( Check Documentation for SlotFilling || Formfilling ). (WIP)

<Tabs>
<TabItem value="php" label="PHP">

```php
$session = false; || $session = getSessionParameter($parameters);
$promptMessage = "Error Message";

triggerPrompt($session,$promptMessage);
```

</TabItem>
</Tabs>

.

## Troubleshoot

In order to Troubleshoot we can use some functions. (Check troubleshoot section for more info)

### getInput

> - Returns the Entire input Request that Dialogflow CX has sent
> - This input helps you to look at the body and troubleshoot.

<Tabs>
<TabItem value="php" label="PHP">

```php
$input = getInput();
```

</TabItem>
</Tabs>

### createInput

> - This function allow us to create a file.txt on ourServer with all the Request.
> - Receives an array with the name of the file that you would like to create.
> - As soon as this function is invoked, the file is create, No need to save as a variable.

<Tabs>
<TabItem value="php" label="PHP">

```php
createInput($fileName);
```

</TabItem>
</Tabs>

## Advanced

These functions solve most of the problems that we can have with Dialogflow CX when managing from low level to hight level of the bot.

### getCurrentRequestType

> - Retrieves the type of request that Dialogflow CX has sent. Could be ( "intent" || "tag" || "event" )
> - This function is used to handle the request in a different way depending on the type of request. Is the initial gear to manage all request that came from dialogflow.

<Tabs>
<TabItem value="php" label="PHP">

```php
$requestType = getCurrentRequestType();
```

</TabItem>
</Tabs>

### getIntent

> - Whether the request is an intent, this function retrieves the name of the intent, if not retrieves a selected intent called 'error_intent' for troubleshooting.

<Tabs>
<TabItem value="php" label="PHP">

```php
$intent = getIntent();
```

</TabItem>
</Tabs>

### getEvent

> - Whether the request is an event, this function retrieves the name of the event, if not retrieves a selected event called 'error_event' for troubleshooting.

<Tabs>
<TabItem value="php" label="PHP">

```php
$event = getEvent();
```

</TabItem>
</Tabs>

### getTag

> - Whether the request is an tag, this function retrieves the name of the tag, if not retrieves a selected tag called 'error_tag' for troubleshooting.

<Tabs>
<TabItem value="php" label="PHP">

```php
$tag = getTag();
```

</TabItem>
</Tabs>

### getUserResponse

> - Retrieves the user Response, otherwise returns a error message.

<Tabs>
<TabItem value="php" label="PHP">

```php
$userResponse = getUserResponse();
```

</TabItem>
</Tabs>

### getBotResponse

> - Retrieves the bot Response, otherwise returns a error message.

<Tabs>
<TabItem value="php" label="PHP">

```php
$botResponse = getBotResponse();
```

</TabItem>
</Tabs>
